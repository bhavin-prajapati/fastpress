{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ab059379c49ec18bc873","webpack:///./node_modules/net/index.js","webpack:///./src/fastpress.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/http-parser.js","webpack:///./src/response.js","webpack:///./src/constants.js"],"names":["Fastpress","s","sock","host","port","routes","callback","_port","createServer","res","on","data","req","parseHTTPRequest","toString","route","method","url","split","console","log","listen","path","cb","parsedReq","header","body","headers","headerArr","chunks","arr","i","length","shift","join","Response","write","DEFAULT_HOSTNAME","DEFAULT_PORT"],"mappings":"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","file":"fastpress.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"fastpress\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fastpress\"] = factory();\n\telse\n\t\troot[\"fastpress\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab059379c49ec18bc873","/*\nCopyright 2013 Sleepless Software Inc. All rights reserved.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to\ndeal in the Software without restriction, including without limitation the\nrights to use, copy, modify, merge, publish, distribute, sublicense, and/or\nsell copies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\nIN THE SOFTWARE. \n*/\n\n// yes, I know this seems stupid, but I have my reasons.\n\nvar net = require(\"net\")\nfor(k in net)\n\tglobal[k] = net[k]\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/net/index.js\n// module id = 0\n// module chunks = 0","import net from 'net';\nimport HTTPParser from './http-parser';\nimport { Response } from './response';\nimport { DEFAULT_HOSTNAME, DEFAULT_PORT } from './constants';\n\nexport default class Fastpress {\n  constructor(s) {\n    this.sock = s;\n    this.host = DEFAULT_HOSTNAME;\n    this.port = DEFAULT_PORT;\n    this.routes = {};\n  }\n\n  listen(port, callback) {\n    const _port = port ? port : this.port;\n\n    // Create a server instance, and chain the listen function to it\n    // The function passed to net.createServer() becomes the event handler for the 'connection' event\n    // The sock object the callback function receives UNIQUE for each connection\n    net.createServer((sock) => {\n      let res = new Response(sock);\n\n      // We have a connection - a socket object is assigned to the connection automatically\n      // console.log('CONNECTED: ' + sock.remoteAddress +':'+ sock.remotePort);\n      // Add a 'data' event handler to this instance of socket\n      sock.on('data', (data) => {\n        let req = HTTPParser.parseHTTPRequest(data.toString());\n        let route = req.method + ' ' + req.url.split('?')[0];\n\n        console.log(route);\n        this.routes[route] ? this.routes[route](req, res) : null;\n      });\n\n      // Add a 'close' event handler to this instance of socket\n      sock.on('close', (data) => {\n        // console.log('CLOSED: ' + sock.remoteAddress +' '+ sock.remotePort);\n      });\n    }).listen(_port, this.host);\n    callback();\n  };\n\n  get(path, cb) {\n    this.routes[`GET ${path}`] = cb;\n  };\n\n  post(path, cb) {\n    this.routes[`POST ${path}`] = cb;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/fastpress.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 2\n// module chunks = 0","const parseHTTPRequest = (data) => {\n  let parsedReq = {};\n  let req = data.split('\\r\\n\\r\\n');\n  let header = req[0];\n  let body = req[1];\n\n  // Parse headers\n  let headers = {};\n  let headerArr = header.split('\\r\\n');\n  let method = headerArr[0].split(' ')[0];\n  let url = headerArr[0].split(' ')[1];\n  let chunks = [];\n  let arr = [];\n\n  for (let i = 1; i < headerArr.length; i++) {\n    chunks = headerArr[i].split(': ');\n    arr = [chunks.shift(), chunks.join(': ')];\n    headers[arr[0]] = arr[1];\n  }\n\n  parsedReq.method = method;\n  parsedReq.url = url;\n  parsedReq.headers = headers;\n  parsedReq.body = body;\n  return parsedReq;\n};\n\nexport {\n  parseHTTPRequest\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/http-parser.js","export default class Response {\n  constructor(s) {\n    this.sock = s;\n  }\n\n  send() {\n    this.sock.write(`HTTP/1.x 200 OK\n        Transfer-Encoding: chunked\n        Date: Sat, 28 Nov 2009 04:36:25 GMT\n        Server: LiteSpeed\n        Connection: close\n        X-Powered-By: W3 Total Cache/0.8\n        Pragma: public\n        Expires: Sat, 28 Nov 2009 05:36:25 GMT\n        Etag: \"pub1259380237;gz\"\n        Cache-Control: max-age=3600, public\n        Content-Type: text/html; charset=UTF-8\n        Last-Modified: Sat, 28 Nov 2009 03:50:37 GMT\n        X-Pingback: http://net.tutsplus.com/xmlrpc.php\n        Content-Encoding: gzip\n        Vary: Accept-Encoding, Cookie, User-Agent`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/response.js","export const DEFAULT_HOSTNAME = '127.0.0.1';\nexport const DEFAULT_PORT = '8080';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js"],"sourceRoot":""}